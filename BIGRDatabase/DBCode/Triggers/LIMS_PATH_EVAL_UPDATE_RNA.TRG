CREATE OR REPLACE TRIGGER LIMS_PATH_EVAL_UPDATE_RNA
AFTER INSERT OR UPDATE OF TUMOR_CELLS, LESION_CELLS, NORMAL_CELLS,
CELLULARSTROMA_CELLS, HYPOACELLULARSTROMA_CELLS, NECROSIS_CELLS, TISSUE_ORIGIN_CONCEPT_ID,
DIAGNOSIS_CONCEPT_ID, MICROSCOPIC_APPEARANCE, EXTERNAL_COMMENTS,
INTERNAL_COMMENTS, REPORTED_YN ON LIMS_PATHOLOGY_EVALUATION
FOR EACH ROW
BEGIN
   IF :NEW.REPORTED_YN = 'Y'
   THEN
      UPDATE RNA_BATCH_DETAIL SET
			TUMOR_CELLS = :NEW.TUMOR_CELLS,
			LESION_CELLS = :NEW.LESION_CELLS,
			NORMAL_CELLS = :NEW.NORMAL_CELLS,
			CELLULARSTROMA_CELLS = :NEW.CELLULARSTROMA_CELLS,
			HYPOACELLULARSTROMA_CELLS = :NEW.HYPOACELLULARSTROMA_CELLS,
			NECROSIS_CELLS = :NEW.NECROSIS_CELLS,
			TISSUETYPE_CODE = :NEW.TISSUE_ORIGIN_CONCEPT_ID,
			DISEASE = :NEW.DIAGNOSIS_CONCEPT_ID,
			SPECIMEN = :NEW.MICROSCOPIC_APPEARANCE,
			EXTERNAL_COMMENTS = :NEW.EXTERNAL_COMMENTS,
			INTERNAL_COMMENTS = :NEW.INTERNAL_COMMENTS
	  WHERE SAMPLE_BARCODE_ID = :NEW.SAMPLE_BARCODE_ID;
   END IF;
END;
/
